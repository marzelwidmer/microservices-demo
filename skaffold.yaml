apiVersion: skaffold/v2alpha3
kind: Config
profiles:
  - name: monkey
    activation:
      - kubeContext: dev/console-c3smonkey-ch:8443/developer
    build:
      insecureRegistries:
        - registry.apps.c3smonkey.ch
      tagPolicy:
        sha256: {}
      artifacts:
        - image: registry.apps.c3smonkey.ch/dev/catalog-service
          jib:
            args: ['-Dimage=registry.apps.c3smonkey.ch/dev/catalog-service']

        - image: registry.apps.c3smonkey.ch/dev/customer-service
          jib:
            args: ['-Dimage=registry.apps.c3smonkey.ch/dev/customer-service']

        - image: registry.apps.c3smonkey.ch/dev/order-service
          jib:
            args: ['-Dimage=registry.apps.c3smonkey.ch/dev/order-service']

        - image: registry.apps.c3smonkey.ch/dev/gateway-service
          jib:
            args: ['-Dimage=registry.apps.c3smonkey.ch/dev/gateway-service']

    deploy:
      kubectl:
        manifests:
          - catalog-deployment.yaml
          - customer-deployment.yaml
          - order-deployment.yaml
          - gateway-deployment.yaml

  - name: local
    build:
      tagPolicy:
        sha256: {}
      artifacts:
        - image: catalog-service
          context: catalog-service
          jib: {}

        - image: customer-service
          context: customer-service
          jib: {}

        - image: order-service
          context: order-service
          jib: {}
        - image: gateway-service
          context: gateway-service
          jib: {}
      local:
        push: false


  - name: osp
    activation:
      - kubeContext: myhelsana-dev-az/osp-preprod-hel-kko-ch:443
    build:
      insecureRegistries:
        - registry.apps.c3smonkey.ch
      tagPolicy:
        sha256: {}
      artifacts:
        - image: registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/catalog-service
          jib:
            args: ['-Djib.from.image=registry.osp-appl-preprod.hel.kko.ch/myhelsana-build-dz/openjdk18-openshift:latest', '-Dimage=registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/catalog-service']

        - image: registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/customer-service
          jib:
            args: ['-Djib.from.image=registry.osp-appl-preprod.hel.kko.ch/myhelsana-build-dz/openjdk18-openshift:latest', '-Dimage=registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/customer-service']

        - image: registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/order-service
          jib:
            args: ['-Djib.from.image=registry.osp-appl-preprod.hel.kko.ch/myhelsana-build-dz/openjdk18-openshift:latest', '-Dimage=registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/order-service']

        - image: registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-azgateway-service
          jib:
            args: ['-Djib.from.image=registry.osp-appl-preprod.hel.kko.ch/myhelsana-build-dz/openjdk18-openshift:latest', '-Dimage=registry.osp-appl-preprod.hel.kko.ch/myhelsana-dev-az/gateway-service']

    deploy:
      kubectl:
        manifests:
          - catalog-deployment-osp.yaml
          - customer-deployment-osp.yaml
          - order-deployment-osp.yaml
          - gateway-deployment-osp.yaml